tinymce.PluginManager.add("responsivefilemanager",function(c){function a(d){if(c.settings.external_filemanager_path.toLowerCase().indexOf(d.origin.toLowerCase())===0){if(d.data.sender==="filemanager"){tinymce.activeEditor.insertContent(d.data.html);tinymce.activeEditor.windowManager.close();if(window.removeEventListener){window.removeEventListener("message",a,false)}else{window.detachEvent("onmessage",a)}}}}function b(){c.focus(true);var h="RESPONSIVE FileManager";if(typeof c.settings.filemanager_title!=="undefined"&&c.settings.filemanager_title){h=c.settings.filemanager_title}var i="key";if(typeof c.settings.filemanager_access_key!=="undefined"&&c.settings.filemanager_access_key){i=c.settings.filemanager_access_key}var d="";if(typeof c.settings.filemanager_sort_by!=="undefined"&&c.settings.filemanager_sort_by){d="&sort_by="+c.settings.filemanager_sort_by}var g="false";if(typeof c.settings.filemanager_descending!=="undefined"&&c.settings.filemanager_descending){g=c.settings.filemanager_descending}var e="";if(typeof c.settings.filemanager_subfolder!=="undefined"&&c.settings.filemanager_subfolder){e="&fldr="+c.settings.filemanager_subfolder}var f="";if(typeof c.settings.filemanager_crossdomain!=="undefined"&&c.settings.filemanager_crossdomain){f="&crossdomain=1";if(window.addEventListener){window.addEventListener("message",a,false)}else{window.attachEvent("onmessage",a)}}win=c.windowManager.open({title:h,file:c.settings.external_filemanager_path+"dialog.php?type=4&descending="+g+d+e+f+"&lang="+c.settings.language+"&akey="+i,width:860,height:570,inline:1,resizable:true,maximizable:true})}c.addButton("responsivefilemanager",{icon:"browse",tooltip:"Insert file",shortcut:"Ctrl+E",onclick:b});c.addShortcut("Ctrl+E","",b);c.addMenuItem("responsivefilemanager",{icon:"browse",text:"Insert file",shortcut:"Ctrl+E",onclick:b,context:"insert"})});